package brockmowry_sec001_ex02;

import java.util.regex.Pattern;

import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.control.TextArea;
import javafx.scene.control.TextField;

public class Controller {

	// Student info fields
	@FXML private TextField firstNameField;
	@FXML private TextField addressField;
	@FXML private TextField cityField;
	@FXML private TextField provinceField;
	@FXML private TextField postalCodeField;
	@FXML private TextField phoneNumberField;
	@FXML private TextField emailField;
	
	@FXML private Button displayButton;
	
	@FXML private TextArea outputArea;
	
	@FXML
	public void initialize() {
		displayButton.setOnAction(event -> {
			if (areTextFieldsEmpty(firstNameField, addressField, cityField, provinceField, postalCodeField, phoneNumberField, emailField)) {
				outputArea.setText("Please fill in all the fields...");
				return;
			}
			
			// validate fields...
			if (!validatePhoneNumber()) {
				outputArea.setText("Please check your phone number formatting\nCorrect format: 123-456-7890");
				return;
			}
			
			if (!validatePostalCode()) {
				outputArea.setText("Please check your postal code formatting\nCorrect format: 123-456-7890");
				return;
			}
			
			outputArea.setText("anal beads...");
		});
	}
	
	private boolean validatePhoneNumber() {
		var phoneNumber = phoneNumberField.getText().trim();
		var regex = "^\\(?(\\d{3})\\)?[-.\\s]?(\\d{3})[-.\\s]?(\\d{4})$";
		var pattern = Pattern.compile(regex);
		var matcher = pattern.matcher(phoneNumber);
		return matcher.matches();
	}
	
	private boolean validatePostalCode() {
		var postalCode = postalCodeField.getText().trim();
		var regex = "^[A-Za-z]\\d[A-Za-z]\\s?\\d[A-Za-z]\\d$";
		var pattern = Pattern.compile(regex);
		var matcher = pattern.matcher(postalCode);
		return matcher.matches();
	}
	
	private boolean areTextFieldsEmpty(TextField... fields) {
		for (var textField : fields)
			if (textField.getText().trim().isEmpty())
				return true;
		
		return false;
	}
	
}